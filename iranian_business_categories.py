#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
🇮🇷 کامل‌ترین دسته‌بندی کسب‌وکارهای ایرانی
از کوچک‌ترین کسب‌وکار تا بزرگ‌ترین صنایع
"""

import json
from pathlib import Path
from datetime import datetime

# دسته‌بندی کامل کسب‌وکارهای ایرانی
IRANIAN_BUSINESS_CATEGORIES = {
    
    # 🧵 صنایع نساجی و پوشاک (از تولید تا فروش)
    "textile_fashion": {
        "title": "نساجی و پوشاک",
        "icon": "🧵",
        "subcategories": {
            "textile_production": {
                "title": "تولید نساجی",
                "businesses": [
                    "کارخانه نساجی", "بافندگی", "ریسندگی", "رنگرزی", 
                    "چاپ پارچه", "تولید الیاف", "بافت قالی", "بافت فرش"
                ]
            },
            "clothing_production": {
                "title": "تولید پوشاک", 
                "businesses": [
                    "خیاطی مردانه", "خیاطی زنانه", "دوخت لباس کودک",
                    "تولید لباس کار", "تولید لباس ورزشی", "تولید لباس زیر",
                    "کفش‌دوزی", "کیف‌دوزی", "تولید کلاه"
                ]
            },
            "fabric_retail": {
                "title": "فروش پارچه و متعلقات",
                "businesses": [
                    "پارچه‌فروشی", "فروش الیاف", "فروش نخ و کاموا",
                    "فروش دکمه و زیپ", "فروش لوازم خیاطی", "فروش منسوجات خانگی"
                ]
            },
            "clothing_retail": {
                "title": "فروش پوشاک",
                "businesses": [
                    "بوتیک زنانه", "مغازه مردانه", "فروش لباس کودک",
                    "کفش‌فروشی", "کیف‌فروشی", "فروش لوازم جانبی",
                    "مزون لباس", "گالری مد"
                ]
            }
        }
    },

    # 🥖 صنایع غذایی (از تولید تا فروش)
    "food_industry": {
        "title": "صنایع غذایی",
        "icon": "🥖",
        "subcategories": {
            "food_production": {
                "title": "تولید مواد غذایی",
                "businesses": [
                    "کارخانه آرد", "آسیاب", "روغن‌کشی", "شکرسازی",
                    "لبنیات", "گوشت‌فرآوری", "کنسرو‌سازی", "آبمیوه‌گیری",
                    "قنادی صنعتی", "شیرینی‌سرا", "نان‌آوری صنعتی"
                ]
            },
            "food_processing": {
                "title": "فرآوری غذا",
                "businesses": [
                    "تهیه غذای آماده", "کترینگ", "آشپزخانه مرکزی",
                    "بسته‌بندی مواد غذایی", "خشک‌کردن میوه", "ترشی‌سازی"
                ]
            },
            "bakery_pastry": {
                "title": "نانوایی و شیرینی‌پزی",
                "businesses": [
                    "نانوایی سنتی", "نانوایی فانتزی", "شیرینی‌پزی",
                    "کیک‌پزی", "بیسکویت‌پزی", "قنادی", "نان‌لواش‌پزی"
                ]
            },
            "food_retail": {
                "title": "فروش مواد غذایی",
                "businesses": [
                    "سوپرمارکت", "میوه‌فروشی", "سبزی‌فروشی", "قصابی",
                    "مرغ‌فروشی", "ماهی‌فروشی", "خشکبار", "عطاری",
                    "فروش لبنیات", "نانوایی", "آبمیوه‌فروشی"
                ]
            },
            "restaurants_cafes": {
                "title": "رستوران و کافه",
                "businesses": [
                    "رستوران سنتی", "رستوران فرنگی", "فست‌فود",
                    "کافه", "کافه‌نت", "چایخانه", "آبمیوه‌بار",
                    "آش‌پزخانه", "کباب‌پزی"
                ]
            }
        }
    },

    # 💎 طلا، جواهر و فلزات گرانبها
    "jewelry_precious_metals": {
        "title": "طلا و جواهرات",
        "icon": "💎",
        "subcategories": {
            "jewelry_making": {
                "title": "ساخت جواهرات",
                "businesses": [
                    "طلاسازی", "نقره‌سازی", "جواهرسازی", "ساعت‌سازی",
                    "حکاکی", "قلم‌زنی", "میناکاری", "فیروزه‌کوبی"
                ]
            },
            "jewelry_retail": {
                "title": "فروش طلا و جواهر",
                "businesses": [
                    "طلافروشی", "جواهرفروشی", "نقره‌فروشی", "ساعت‌فروشی",
                    "سنگ‌های قیمتی", "بیژوتری", "صنایع‌دستی فلزی"
                ]
            }
        }
    },

    # 🏥 خدمات درمانی و سلامت (تمام بخش‌ها)
    "healthcare_medical": {
        "title": "خدمات درمانی و سلامت",
        "icon": "🏥",
        "subcategories": {
            "medical_centers": {
                "title": "مراکز درمانی",
                "businesses": [
                    "بیمارستان عمومی", "بیمارستان تخصصی", "کلینیک",
                    "پلی‌کلینیک", "درمانگاه", "مرکز جراحی", "اورژانس"
                ]
            },
            "dental_services": {
                "title": "خدمات دندانپزشکی",
                "businesses": [
                    "مطب دندانپزشکی", "کلینیک دندانپزشکی", "ارتودنسی",
                    "ایمپلنت", "دندان‌سازی", "لابراتوار دندانسازی"
                ]
            },
            "specialized_medical": {
                "title": "تخصص‌های پزشکی",
                "businesses": [
                    "چشم‌پزشکی", "گوش و حلق و بینی", "قلب و عروق",
                    "ارتوپدی", "نورولوژی", "روانپزشکی", "زنان و زایمان",
                    "کودکان", "جراحی پلاستیک", "پوست و مو"
                ]
            },
            "alternative_medicine": {
                "title": "طب سنتی و جایگزین",
                "businesses": [
                    "طب سنتی", "طب سوزنی", "ماساژ درمانی", "کایروپرکتیک",
                    "فیزیوتراپی", "گفتار درمانی", "کار درمانی"
                ]
            },
            "pharmacy_medical_supplies": {
                "title": "داروخانه و تجهیزات",
                "businesses": [
                    "داروخانه", "داروسازی", "تجهیزات پزشکی",
                    "عینک‌سازی", "سمعک‌سازی", "وسایل کمک‌توانبخشی"
                ]
            },
            "beauty_wellness": {
                "title": "زیبایی و تناسب اندام",
                "businesses": [
                    "آرایشگاه زنانه", "آرایشگاه مردانه", "سالن زیبایی",
                    "باشگاه بدنسازی", "یوگا", "پیلاتس", "اسپا",
                    "ماساژ", "لاغری", "زیبایی پوست"
                ]
            }
        }
    },

    # 🛒 خرده‌فروشی و عمده‌فروشی
    "retail_wholesale": {
        "title": "خرده‌فروشی و عمده‌فروشی",
        "icon": "🛒",
        "subcategories": {
            "general_retail": {
                "title": "خرده‌فروشی عمومی",
                "businesses": [
                    "سوپرمارکت", "هایپرمارکت", "فروشگاه محلی",
                    "مغازه مختلط", "کیوسک", "دکه"
                ]
            },
            "specialized_retail": {
                "title": "خرده‌فروشی تخصصی",
                "businesses": [
                    "لوازم خانگی", "لوازم برقی", "موبایل‌فروشی",
                    "کتاب‌فروشی", "اسباب‌بازی", "ورزشی",
                    "کامپیوتر", "لوازم التحریر", "گل‌فروشی"
                ]
            },
            "wholesale": {
                "title": "عمده‌فروشی",
                "businesses": [
                    "انبار مواد غذایی", "توزیع کالا", "بازار عمده",
                    "واردات و صادرات", "نمایندگی فروش"
                ]
            }
        }
    },

    # 🏗️ ساختمان و املاک
    "construction_real_estate": {
        "title": "ساختمان و املاک",
        "icon": "🏗️",
        "subcategories": {
            "construction": {
                "title": "ساخت و ساز",
                "businesses": [
                    "پیمانکاری ساختمان", "معماری", "نقشه‌کشی",
                    "آهنگری", "جوشکاری", "نجاری", "کاشی‌کاری",
                    "نقاشی ساختمان", "سیمان‌کاری", "لوله‌کشی", "برق‌کاری"
                ]
            },
            "building_materials": {
                "title": "مصالح ساختمانی",
                "businesses": [
                    "فروش سیمان", "آجر و بلوک", "رنگ و رزین",
                    "آهن‌آلات", "درب و پنجره", "کاشی و سرامیک",
                    "لوازم سرویس بهداشتی", "موکت و کف‌پوش"
                ]
            },
            "real_estate": {
                "title": "خدمات املاک",
                "businesses": [
                    "مشاور املاک", "آژانس املاک", "سرمایه‌گذاری املاک",
                    "ارزیابی املاک", "مدیریت املاک", "وام و رهن"
                ]
            }
        }
    },

    # 🚗 حمل‌ونقل و خودرو
    "transportation_automotive": {
        "title": "حمل‌ونقل و خودرو",
        "icon": "🚗",
        "subcategories": {
            "automotive_services": {
                "title": "خدمات خودرو",
                "businesses": [
                    "تعمیرگاه خودرو", "نمایندگی فروش", "لوازم‌یدکی",
                    "رنگ و صافکاری", "تعویض روغن", "باتری‌فروشی",
                    "لاستیک‌فروشی", "شستشوی خودرو"
                ]
            },
            "transportation": {
                "title": "حمل‌ونقل",
                "businesses": [
                    "تاکسی", "آژانس مسافربری", "اتوبوس شهری",
                    "باربری", "حمل‌ونقل بین‌شهری", "پیک موتوری"
                ]
            }
        }
    },

    # 🎓 آموزش و فرهنگ
    "education_culture": {
        "title": "آموزش و فرهنگ",
        "icon": "🎓",
        "subcategories": {
            "educational_institutions": {
                "title": "موسسات آموزشی",
                "businesses": [
                    "مهدکودک", "دبستان", "راهنمایی و دبیرستان",
                    "دانشگاه", "موسسه آموزش عالی", "مدرسه فنی‌حرفه‌ای"
                ]
            },
            "private_education": {
                "title": "آموزش خصوصی",
                "businesses": [
                    "کلاس‌های کنکور", "زبان‌سرا", "موسیقی",
                    "نقاشی", "کامپیوتر", "خیاطی", "آشپزی"
                ]
            },
            "cultural_centers": {
                "title": "مراکز فرهنگی",
                "businesses": [
                    "کتابخانه", "موزه", "گالری هنری", "سینما",
                    "تئاتر", "سالن کنسرت", "مرکز فرهنگی"
                ]
            }
        }
    },

    # 🎨 صنایع‌دستی و هنری
    "handicrafts_arts": {
        "title": "صنایع‌دستی و هنری", 
        "icon": "🎨",
        "subcategories": {
            "traditional_crafts": {
                "title": "صنایع‌دستی سنتی",
                "businesses": [
                    "فرش‌بافی", "گلیم‌بافی", "قالی‌بافی", "سفال‌گری",
                    "معرق‌کاری", "خاتم‌کاری", "قلم‌زنی", "میناکاری",
                    "چرم‌دوزی", "ابریشم‌بافی", "تطمه‌دوزی"
                ]
            },
            "modern_arts": {
                "title": "هنرهای مدرن",
                "businesses": [
                    "نقاشی", "مجسمه‌سازی", "گرافیک", "عکاسی",
                    "طراحی داخلی", "معماری", "صنایع‌دستی مدرن"
                ]
            }
        }
    },

    # 💻 فناوری اطلاعات
    "information_technology": {
        "title": "فناوری اطلاعات",
        "icon": "💻",
        "subcategories": {
            "it_services": {
                "title": "خدمات IT",
                "businesses": [
                    "طراحی وب‌سایت", "برنامه‌نویسی", "تعمیر کامپیوتر",
                    "فروش کامپیوتر", "شبکه", "امنیت سایبری",
                    "هاستینگ", "طراحی گرافیک"
                ]
            }
        }
    },

    # 🏦 خدمات مالی
    "financial_services": {
        "title": "خدمات مالی",
        "icon": "🏦",
        "subcategories": {
            "banking_insurance": {
                "title": "بانک و بیمه",
                "businesses": [
                    "بانک", "موسسه اعتباری", "بیمه", "صرافی",
                    "لیزینگ", "سرمایه‌گذاری", "مشاوره مالی"
                ]
            }
        }
    },

    # 🌱 کشاورزی و دامپروری
    "agriculture_livestock": {
        "title": "کشاورزی و دامپروری",
        "icon": "🌱",
        "subcategories": {
            "farming": {
                "title": "کشاورزی",
                "businesses": [
                    "زراعت", "باغداری", "گلخانه", "مرغداری",
                    "دامداری", "زنبورداری", "ماهی‌پروری", "قارچ‌پروری"
                ]
            },
            "agricultural_supplies": {
                "title": "لوازم کشاورزی",
                "businesses": [
                    "کود و سم", "بذر و نهال", "ماشین‌آلات کشاورزی",
                    "دامپزشکی", "خوراک دام"
                ]
            }
        }
    },

    # ⚙️ صنایع و تولید
    "manufacturing_industry": {
        "title": "صنایع و تولید",
        "icon": "⚙️",
        "subcategories": {
            "heavy_industry": {
                "title": "صنایع سنگین",
                "businesses": [
                    "فولاد", "پتروشیمی", "سیمان", "معدن",
                    "نفت و گاز", "برق", "آب"
                ]
            },
            "light_industry": {
                "title": "صنایع سبک",
                "businesses": [
                    "پلاستیک", "شیشه", "کاغذ", "چوب",
                    "الکترونیک", "بسته‌بندی"
                ]
            }
        }
    },

    # 🏨 خدمات و گردشگری
    "tourism_hospitality": {
        "title": "گردشگری و مهمان‌نوازی",
        "icon": "🏨",
        "subcategories": {
            "hospitality": {
                "title": "خدمات مهمان‌نوازی",
                "businesses": [
                    "هتل", "مهمان‌سرا", "موتل", "اقامتگاه بوم‌گردی",
                    "آژانس مسافرتی", "راهنمای تور"
                ]
            }
        }
    },

    # 🔧 خدمات فنی و تعمیرات
    "technical_services": {
        "title": "خدمات فنی و تعمیرات",
        "icon": "🔧",
        "subcategories": {
            "repair_services": {
                "title": "تعمیرات",
                "businesses": [
                    "تعمیر لوازم خانگی", "تعمیر موبایل", "تعمیر کامپیوتر",
                    "برق‌کار", "لوله‌کش", "تهویه مطبوع", "آسانسور"
                ]
            }
        }
    }
}

def generate_complete_iranian_business_structure():
    """تولید ساختار کامل کسب‌وکارهای ایرانی"""
    
    # آمار کلی
    total_categories = len(IRANIAN_BUSINESS_CATEGORIES)
    total_subcategories = sum(len(cat['subcategories']) for cat in IRANIAN_BUSINESS_CATEGORIES.values())
    total_businesses = sum(
        len(subcat['businesses']) 
        for cat in IRANIAN_BUSINESS_CATEGORIES.values()
        for subcat in cat['subcategories'].values()
    )
    
    # ساختار کامل
    complete_structure = {
        "metadata": {
            "title": "کامل‌ترین دسته‌بندی کسب‌وکارهای ایرانی",
            "description": "از کوچک‌ترین کسب‌وکار محلی تا بزرگ‌ترین صنایع",
            "version": "2024.1",
            "language": "fa",
            "country": "Iran",
            "total_categories": total_categories,
            "total_subcategories": total_subcategories,
            "total_businesses": total_businesses,
            "created_at": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
            "coverage": "کامل - تمام بخش‌های اقتصادی ایران",
            "purpose": "طراحی قالب‌های سایت برای هر نوع کسب‌وکار ایرانی"
        },
        "categories": IRANIAN_BUSINESS_CATEGORIES,
        "business_size_classification": {
            "micro": "خرد (1-4 نفر) - دکه، کیوسک، کار شخصی",
            "small": "کوچک (5-19 نفر) - مغازه، آتلیه، کلینیک",
            "medium": "متوسط (20-99 نفر) - کارخانه کوچک، مرکز خرید",
            "large": "بزرگ (100+ نفر) - کارخانه بزرگ، شرکت‌های بزرگ"
        },
        "target_customers": {
            "b2c": "مستقیم با مردم (B2C) - خرده‌فروشی، خدمات شخصی",
            "b2b": "تجاری به تجاری (B2B) - عمده‌فروشی، خدمات تجاری",
            "b2g": "با دولت (B2G) - پیمانکاری دولتی، خدمات عمومی"
        }
    }
    
    return complete_structure

def save_iranian_business_categories():
    """ذخیره دسته‌بندی کامل"""
    structure = generate_complete_iranian_business_structure()
    
    # ذخیره فایل اصلی
    main_file = Path("extraction_module/iranian_business_complete.json")
    with open(main_file, 'w', encoding='utf-8') as f:
        json.dump(structure, f, ensure_ascii=False, indent=2)
    
    # تولید لیست ساده برای استفاده سریع
    simple_list = {}
    for cat_key, category in structure['categories'].items():
        simple_list[cat_key] = {
            "title": category['title'],
            "icon": category['icon'],
            "total_subcategories": len(category['subcategories']),
            "sample_businesses": []
        }
        
        # نمونه کسب‌وکارها از هر زیرمجموعه
        for subcat in category['subcategories'].values():
            simple_list[cat_key]["sample_businesses"].extend(subcat['businesses'][:3])
    
    # ذخیره لیست ساده
    simple_file = Path("extraction_module/iranian_business_simple.json")
    with open(simple_file, 'w', encoding='utf-8') as f:
        json.dump(simple_list, f, ensure_ascii=False, indent=2)
    
    return main_file, simple_file

def generate_business_guide():
    """تولید راهنمای انتخاب قالب برای کسب‌وکارها"""
    
    guide_content = """# 🇮🇷 راهنمای کامل انتخاب قالب برای کسب‌وکارهای ایرانی

## 🎯 چگونه قالب مناسب کسب‌وکارتان را انتخاب کنید؟

### مرحله 1: شناسایی نوع کسب‌وکار
شما در کدام دسته قرار می‌گیرید؟

#### 🧵 نساجی و پوشاک
- **اگر تولیدکننده هستید**: قالب‌های صنعتی با گالری محصولات
- **اگر خیاط هستید**: قالب شخصی با نمونه‌کارها
- **اگر پارچه‌فروش هستید**: قالب فروشگاهی با کاتالوگ

#### 🥖 مواد غذایی
- **رستوران**: قالب با منو، رزرو آنلاین
- **نانوایی**: قالب ساده با اطلاعات تماس
- **سوپرمارکت**: قالب فروشگاهی کامل

#### 💎 طلا و جواهر
- **طلاساز**: قالب گالری با تصاویر کیفیت بالا
- **طلافروش**: قالب فروشگاهی لوکس

#### 🏥 پزشکی و سلامت
- **پزشک**: قالب مطب با نوبت‌دهی
- **آرایشگاه**: قالب زیبایی با گالری
- **داروخانه**: قالب اطلاعاتی

### مرحله 2: تعیین اندازه کسب‌وکار

#### کسب‌وکار خرد (1-4 نفر)
- قالب‌های ساده و کاربردی
- تمرکز روی اطلاعات تماس
- صفحه‌ای (One Page)

#### کسب‌وکار کوچک (5-19 نفر)  
- قالب‌های چندصفحه‌ای
- بخش درباره ما و خدمات
- فرم تماس پیشرفته

#### کسب‌وکار متوسط (20-99 نفر)
- قالب‌های تجاری حرفه‌ای
- سیستم مدیریت محتوا
- وبلاگ و اخبار

#### کسب‌وکار بزرگ (100+ نفر)
- قالب‌های شرکتی پیشرفته
- پورتال کاربری
- سیستم‌های پیچیده

### مرحله 3: تعیین مخاطب هدف

#### مستقیم با مردم (B2C)
- طراحی جذاب و رنگارنگ
- زبان ساده و قابل فهم
- تصاویر واقعی و صمیمی

#### تجاری (B2B)
- طراحی حرفه‌ای و محتشم
- محتوای تخصصی
- اعتمادسازی قوی

#### دولتی (B2G)
- طراحی رسمی
- مدارک و گواهینامه‌ها
- شفافیت کامل

## 🎨 راهنمای رنگ‌ها بر اساس فرهنگ ایرانی

### رنگ‌های مناسب هر کسب‌وکار:

- **آبی**: اعتماد، پزشکی، بانک، فناوری
- **سبز**: طبیعت، غذا، کشاورزی، پارک
- **طلایی**: لوکس، طلا، جواهر، مراسم
- **قرمز**: فوریت، فروش، رستوران، ورزش
- **بنفش**: زیبایی، هنر، آرایشگاه، مد
- **قهوه‌ای**: سنتی، چوب، قالی، صنایع‌دستی
- **خاکستری**: مدرن، فناوری، معماری

## 📱 ویژگی‌های ضروری برای هر نوع کسب‌وکار

### همه کسب‌وکارها:
- ✅ اطلاعات تماس واضح
- ✅ آدرس و نقشه
- ✅ ساعات کاری
- ✅ طراحی موبایل‌فرندلی

### فروشگاه‌ها:
- ✅ کاتالوگ محصولات
- ✅ قیمت‌گذاری
- ✅ سبد خرید
- ✅ پرداخت آنلاین

### خدمات:
- ✅ توضیح خدمات
- ✅ نمونه‌کارها
- ✅ نظرات مشتریان
- ✅ فرم درخواست

### تولیدی:
- ✅ فرآیند تولید
- ✅ گواهینامه‌ها
- ✅ ظرفیت تولید
- ✅ توزیع‌کنندگان

## 🚀 نکات بهینه‌سازی برای بازار ایران

1. **زبان فارسی**: پشتیبانی کامل از راست‌چین
2. **فرهنگ محلی**: استفاده از تصاویر و محتوای بومی
3. **سرعت**: بهینه‌سازی برای اینترنت ایران
4. **پرداخت**: درگاه‌های پرداخت ایرانی
5. **قانونی**: رعایت قوانین تجارت الکترونیک

---

*این راهنما برای کمک به انتخاب بهترین قالب برای کسب‌وکار شما طراحی شده است.*
"""
    
    guide_file = Path("extraction_module/IRANIAN_BUSINESS_GUIDE.md")
    with open(guide_file, 'w', encoding='utf-8') as f:
        f.write(guide_content)
    
    return guide_file

if __name__ == "__main__":
    print("🇮🇷 ایجاد کامل‌ترین دسته‌بندی کسب‌وکارهای ایرانی...")
    
    # ذخیره فایل‌ها
    main_file, simple_file = save_iranian_business_categories()
    guide_file = generate_business_guide()
    
    # نمایش آمار
    structure = generate_complete_iranian_business_structure()
    metadata = structure['metadata']
    
    print(f"\n✅ فایل‌ها ایجاد شدند:")
    print(f"📊 {main_file.name} - فایل کامل")
    print(f"📋 {simple_file.name} - فایل ساده")  
    print(f"📖 {guide_file.name} - راهنمای انتخاب")
    
    print(f"\n📈 آمار کلی:")
    print(f"🏪 دسته‌های اصلی: {metadata['total_categories']}")
    print(f"📂 زیردسته‌ها: {metadata['total_subcategories']}")  
    print(f"💼 انواع کسب‌وکار: {metadata['total_businesses']}")
    
    print(f"\n🎯 پوشش: {metadata['coverage']}")
    print(f"🇮🇷 از خیاطی محلی تا کارخانه‌های بزرگ - همه چیز!")