var N=Object.defineProperty;var f=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var R=(e,t,n)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t)=>{for(var n in t||(t={}))U.call(t,n)&&R(e,n,t[n]);if(f)for(var n of f(t))b.call(t,n)&&R(e,n,t[n]);return e};var y=(e,t)=>{var n={};for(var r in e)U.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&f)for(var r of f(e))t.indexOf(r)<0&&b.call(e,r)&&(n[r]=e[r]);return n};var p=(e,t,n)=>new Promise((r,i)=>{var c=o=>{try{a(n.next(o))}catch(s){i(s)}},u=o=>{try{a(n.throw(o))}catch(s){i(s)}},a=o=>o.done?r(o.value):Promise.resolve(o.value).then(c,u);a((n=n.apply(e,t)).next())});import{n as z,t as H,g as h,x as X,a as J,y as K,d as G,I as E,q as T,z as B,U as C}from"./GlobalSetup-RGbnnBT0.js";function ce(e,t){return _(e,l({method:"DELETE"},t))}function Q(e,t){return _(e,l({method:"POST"},t))}function ae(e,t){return _(e,l({method:"PUT"},t))}function ue(e,t){return _(e,l({method:"GET"},t))}function _(e,t){const n=document.querySelector("meta[name=csrf-token]"),u=t,{headers:r}=u,i=y(u,["headers"]),c=l({headers:l({Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":n==null?void 0:n.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},r)},i);return fetch(e,c)}var Y=H();const M=z(Y),le=h(X);var v,I;function ge(){if(I)return v;I=1,n.$inject=["$q"];var e=J,t={};function n(r){return{get:i,loadDataFromTemplate:c};function i(o){return r(function(s,g){t[o]?s(t[o]):g()})}function c(o){e.forEach(o.find("script"),function(s){s.type=="text/ng-data"&&a(e.element(s))})}function u(o,s){t[o]=s}function a(o){u(o.attr("id"),JSON.parse(o.text()))}}return v=n,v}var m,D;function fe(){if(D)return m;D=1,e.$inject=["$http","DataService"];function e(t,n){return{getMessage:r,getMessageWithCount:i,getLocaleInfo:c,setLocale:u};function r(a,o,s){var g=a[o];if(s)for(var A in s)g=g.replace("%{"+A+"}",s[A]);return g}function i(a,o,s){var g=o===1?"one":"other";return r(a,g,s)}function c(){return n.get("/locale_info")}function u(a){return t.post("/set_locale",{locale:a})}}return m=e,m}const Z=h(K);var L,O;function de(){if(O)return L;O=1;const e=Z;function t(){return l({},e)}return L=t,L}function d(e,t){return p(this,null,function*(){const n="post_login_actions",r={name:e,data:t};try{return G(n,r),(yield(yield Q(`/${n}`,{body:JSON.stringify(r)})).json()).postLoginActionId}catch(i){return console.error("Error creating post login action:",i),Promise.reject(i)}})}function q(e){const t="post_login_action_id",n={};return n[t]=e,n}const V=Object.freeze(Object.defineProperty({__proto__:null,createPostLoginAction:d,getPostLoginActionParamsForUrl:q},Symbol.toStringTag,{value:"Module"}));function ee(e,t){return new Promise((n,r)=>{M.addOnReadyHandler(function(){E.isSignedInUser()?n():document.querySelector("af-susi-light")?d(e,t).then(c=>{k(c),T(W(c))}).catch(r):d(e,t).then(w).catch(r)})})}function x(e){return p(this,null,function*(){e.preventDefault();const t=this.href,n=yield d("redirect");if(!document.querySelector("af-susi-light"))return w(n,t);k(n,this.href),T(this.href,()=>{window.location=t})})}function F(){document.querySelectorAll("a").forEach(e=>{e.href.includes(window.location.origin)&&e.addEventListener("click",x)})}function te(){B("require_login_experiment")&&M.addOnReadyHandler(()=>{if(E.isSignedInUser())return;new MutationObserver(()=>{F()}).observe(document.body,{childList:!0,subtree:!0})})}function w(e,t=""){const n=new URLSearchParams(C.getSearchParams()),r=q(e);Object.entries(r).forEach(([i,c])=>{n.set(i,c)}),t||(t=window.location.pathname),window.location="/login/sso?back_to="+encodeURIComponent(t+"?"+n.toString())}function W(e,t=""){const r=new URL(window.location.href).origin,i=new URLSearchParams(C.getSearchParams()),c=q(e);return Object.entries(c).forEach(([u,a])=>{i.set(u,a)}),t||(t=window.location.pathname),r+"/redirect/susi?back_to="+encodeURIComponent(t+"?"+i.toString())}function k(e,t=""){const n=document.querySelector("af-susi-light"),r=W(e,t);n.updateRedirectUri(r)}const ne=Object.freeze(Object.defineProperty({__proto__:null,attachLinksWithPostLoginAction:F,handleAuthenticationWithPostLoginAction:ee,handleRequireLoginLinkClick:x,initLinksWithPostLoginAction:te,redirectToLoginPage:w},Symbol.toStringTag,{value:"Module"})),re=h(ne);var S,$;function he(){if($)return S;$=1;const e=re;function t(){return l({},e)}return S=t,S}const oe=h(V);var P,j;function _e(){if(j)return P;j=1;const e=oe;function t(){return l({},e)}return P=t,P}export{M as I,fe as a,de as b,he as c,_e as d,ce as e,ae as f,ue as g,le as h,te as i,Z as j,Q as p,ge as r};
//# sourceMappingURL=post_login_action_creator_service-CI1YBBMx.js.map
