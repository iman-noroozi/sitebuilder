import{a as f,l as p}from"./entry.e76eb76a.js";import{I as _,a as w,e as b,c,t as r,g as k}from"./helper.016738b8.js";/* empty css             */import{m as u,n as t,G as i,y as l,p as d,x as y,D as S,q as F,F as A,W as v}from"./vue.178cf25e.js";import"./i18n.3c77d8a7.js";import"./libs.b22191e3.js";const j={name:"I8AuthFormCommon",components:{I8AuthForm:_,I8PasswordResetForm:w},provide:()=>({env:b}),props:{waitUntilAuthConfigured:{type:Boolean,default:!1},isRegisterTab:{type:Boolean,required:!1,default:!0},userProcessingEmail:{type:String,required:!1,default:""},source:{type:String,default:void 0}},emits:["success","forgot-password"],setup(){const e=k("landings");return{authStore:p(),project:e}},data:()=>({isForgotPassword:!1,isAuthConfigured:!1}),async created(){this.waitUntilAuthConfigured&&(await c(this.$i18n.locale),await this.$nextTick(),this.isAuthConfigured=!0)},mounted(){this.$i8anTrack({event:"loginShow",projectName:this.project,tables:["features"],popupSource:this.source}),this.waitUntilAuthConfigured||c(this.$i18n.locale)},methods:{async onLogin(e){this.onSuccess(e).then(()=>{this.$i8anTrack({event:"login",tables:["features"],projectName:this.project,method:"email"})}),r("login")},async onRegister(e){this.onSuccess(e).then(()=>{this.$i8anTrack({event:"registration",tables:["features"],projectName:this.project,method:"email"})}),r("registration",e)},onSubscribeNewsletter(){r("newsletter")},async onSuccess(e){e.token?(await this.authStore.fillUserInfo(e.token),this.$emit("success")):console.warn("No token provided")},onForgotPassword(){this.isForgotPassword=!0,this.$emit("forgot-password")}}},P={key:1};function C(e,n,o,h,I,s){const m=u("i8-auth-form",!0),g=u("i8-password-reset-form");return t(),i(v,{name:"fade-scale",mode:"out-in",appear:""},{default:l(()=>[!o.waitUntilAuthConfigured||e.isAuthConfigured?(t(),d(A,{key:0},[e.isForgotPassword?(t(),i(g,{key:1,class:"i8-auth-form__reset-pass"})):(t(),i(m,{key:0,"show-register-tab":o.isRegisterTab,"user-processing-email":o.userProcessingEmail,project:h.project,onLogin:s.onLogin,onRegister:s.onRegister,onSubscribeNewsletter:s.onSubscribeNewsletter,onForgotPassword:s.onForgotPassword},y({_:2},[S(e.$slots,(T,a)=>({name:a,fn:l(()=>[F(e.$slots,a,{},void 0,!0)])}))]),1032,["show-register-tab","user-processing-email","project","onLogin","onRegister","onSubscribeNewsletter","onForgotPassword"]))],64)):(t(),d("div",P))]),_:3})}const x=f(j,[["render",C],["__scopeId","data-v-b3e689c0"]]);export{x as default};
