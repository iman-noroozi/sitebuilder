(()=>{"use strict";function _defineProperty(e,t,i){return(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Utils{static compareRequestToSettings(e,t,i,o,r){let s=[];for(const a of i)for(const i of t)Utils.entriesAreEqual(i,a)&&(s=Utils.checkShowHide(i,e,o,r));return s}static checkShowHide(e,t,i,o){let r=[];return"show"===e.type&&(r.push(e),t.classList.remove(Utils.hideClass)),"hide"===e.type&&i&&(o.show=!1),r}static entriesAreEqual(e,t){return e.name===t.name&&e.value===t.value}static getCookie(e){const t=e+"=";let i;return decodeURIComponent(document.cookie).split("; ").forEach((e=>{0===e.indexOf(t)&&(i=e.substring(t.length))})),i}static setCookie(e,t,i){let o="",r=new Date;r.setTime(r.getTime()+1e3*i),o="; expires="+r.toGMTString(),document.cookie=e+"="+t+o+"; path=/"}static getData(e){return JSON.parse(e.getAttribute(Utils.dataSelector))}static isAllHide(e){return e.getAttribute(Utils.allHideSelector)}}function geo_script_defineProperty(e,t,i){return(t=function geo_script_toPropertyKey(e){var t=function geo_script_toPrimitive(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(Utils,"dataSelector","data-visibility"),_defineProperty(Utils,"hideClass","elementor-network-hidden"),_defineProperty(Utils,"allHideSelector","visibility-all-hide");class GeoTrace{constructor(){geo_script_defineProperty(this,"fetchError",!1)}async getLocationCode(){let e=GeoTrace.getFromStorage();if(e)return e;try{let t=await GeoTrace.fetchCloudflareCgiTrace(),i=await t.text();e=this.extractFromTraceEndpoint(i,"loc"),GeoTrace.saveToStorage(e)}catch(e){this.fetchError=!0}return e}async getIpAddress(){let e;try{let t=await GeoTrace.fetchCloudflareCgiTrace(),i=await t.text();e=this.extractFromTraceEndpoint(i,"ip")}catch(e){this.fetchError=!0}return e}extractFromTraceEndpoint(e,t){let i;if(!e)throw"responseEmpty";return i=e.split(t+"=")[1].split("\n")[0],i}static async fetchCloudflareCgiTrace(){const e=new AbortController,t=setTimeout((()=>e.abort()),GeoTrace.fetchTimeout),i=await fetch(GeoTrace.traceEndpoint,{mode:"cors"});return clearTimeout(t),i}static saveToStorage(e){GeoTrace.isLocalStorageOn()&&window.localStorage.setItem(GeoTrace.storageKey,JSON.stringify(e))}static getFromStorage(){return!!GeoTrace.isLocalStorageOn()&&JSON.parse(window.localStorage.getItem(GeoTrace.storageKey))}static isLocalStorageOn(){return void 0!==window.localStorage}}geo_script_defineProperty(GeoTrace,"traceEndpoint","https://elementor.com/cdn-cgi/trace"),geo_script_defineProperty(GeoTrace,"fetchTimeout",3e3),geo_script_defineProperty(GeoTrace,"storageKey","elGeoLocationCode");class elementorGeoVisibility{constructor(){this.setSettings()}setSettings(){this.loadingSelector=".geo-visibility-loader"}hideLoading(){const e=document.querySelector(this.loadingSelector);e&&e.remove()}initDefaultBehavior(e,t){t&&e.classList.remove(Utils.hideClass)}async handleGeoConditions(e,t,i,o){const r=new GeoTrace,s=await r.getLocationCode(),a=t.geo_settings;r.fetchError?(console.error("Fetch error"),this.initDefaultBehavior(e,t.default)):this.geoShow(a,s)||this.geoNotHide(a,s)?e.classList.remove(Utils.hideClass):this.geoHide(a,s)&&i&&(o.show=!1),this.hideLoading()}geoShow(e,t){return e.show&&e.show.length>0&&e.show.indexOf(t)>=0}geoNotHide(e,t){return e.hide&&e.hide.length>0&&e.hide.indexOf(t)<0}geoHide(e,t){return e.hide&&e.hide.length>0&&-1!==e.hide.indexOf(t)}}class Param{getUrlSearchParamsObject(){const e={};for(const[t,i]of new URLSearchParams(location.search).entries())e[t]=i;return e}getCookieParamsObject(e){const t={},i=e[script_vars.page_id.toString()];return i&&i.forEach((e=>{t[e.name]=e.value})),t}handleParamVisibility(e,t,i,o){if(!e.classList.contains(Utils.hideClass))return;const r=t.params_settings.params||[],s=this.getUrlSearchParamsObject();let a=JSON.parse(Utils.getCookie("visibility_params_data")||"{}");const n={...this.getCookieParamsObject(a),...s};let c=Utils.compareRequestToSettings(e,r,this.getParams(n),i,o);c.length>0&&"yes"===t.params_settings.save_cookies&&(a[script_vars.page_id.toString()]=c,Utils.setCookie("visibility_params_data",JSON.stringify(a),t.params_settings.save_cookies_time))}getParams(e){const t=[];for(const i in e)t.push({name:i,value:e[i]});return t}}class Cookie{handleCookieVisibility(e,t,i,o){if(!e.classList.contains(Utils.hideClass))return;const r=t.cookies_settings.cookies||[];Utils.compareRequestToSettings(e,r,this.getCookies(),i,o)}getCookies(){let e,t=document.cookie.split(";"),i=[];return t.forEach((t=>{e=t.split("="),i.push({name:e[0].toString().trim(),value:e.slice(1).join("=")})})),i}}class LocalStorage{handleLocalStorageVisibility(e,t,i,o){if(!e.classList.contains(Utils.hideClass))return;const r=t.local_storage_settings.local_storage||[];for(const t of r){window.localStorage.getItem(t.name)===t.value&&Utils.checkShowHide(t,e,i,o)}}}(new class Module{init(){document.querySelectorAll("["+Utils.dataSelector+"]").forEach((e=>{const t=Utils.getData(e),i="yes"===Utils.isAllHide(e);let o={show:!0};(new elementorGeoVisibility).handleGeoConditions(e,t,i,o),(new Param).handleParamVisibility(e,t,i,o),(new Cookie).handleCookieVisibility(e,t,i,o),(new LocalStorage).handleLocalStorageVisibility(e,t,i,o),i&&o.show&&e.classList.remove(Utils.hideClass)}))}}).init()})();
//# sourceMappingURL=visibility.min.js.map